# tone_advisor.py
# 다양한 대화 상황(감정, 관계, 맥락)에 따라 어조와 표현을 조정합니다.

from typing import Optional


def adjust_tone(message: str, context: Optional[str] = None) -> str:
    """
    다양한 정서적/사회적 상황에 따라 어조를 조절하여 응답 생성

    Parameters:
        message (str): 기본 메시지
        context (str): 상황 맥락 (예: '위로', '축하', '일상', '기쁨', '재회', '첫만남', '생산활동', '긴장상태', 등)

    Returns:
        context에 맞게 조정된 메시지 (str)
    """

    tone_prefix = {
        "기쁨": "정말 기쁜 마음으로 말씀드립니다. ",
        "일상": "가볍게 나누는 이야기로, ",
        "일에 집중": "업무 관점에서 말씀드리자면, ",
        "생산활동": "함께 만들어가는 과정에서, ",
        "위로": "당신의 마음을 이해하며 조심스럽게 말씀드리면, ",
        "첫만남": "처음 인사드리는 입장에서, ",
        "오랜만의 만남": "오랜만이라 더 반갑게, ",
        "재회": "다시 만나 기쁘게 인사드리며, ",
        "축하": "진심을 담아 축하드리며, ",
        "불안정": "불안한 상황 속에서도 안정적인 표현을 사용하여, ",
        "논쟁 중": "차분하게 의견을 조율해보면, ",
        "상처받은 사용자": "상대방의 마음을 헤아리며 신중하게, ",
        "코칭 요청": "건설적인 조언을 드리자면, ",
    }

    tone_suffix = {
        "위로": " 당신은 혼자가 아닙니다.",
        "축하": " 앞으로 더 좋은 일이 가득하길 바랍니다!",
        "기쁨": " 이 기쁨이 오래 가시길 바랍니다!",
        "일상": " 오늘 하루도 평온하시길 바라요.",
        "논쟁 중": " 우리는 서로 다를 수 있지만 함께 이해할 수 있습니다.",
        "첫만남": " 잘 부탁드립니다.",
        "재회": " 다시 연결되어 기쁩니다.",
    }

    prefix = tone_prefix.get(context, "제가 느끼기엔, ")
    suffix = tone_suffix.get(context, "")

    return f"{prefix}{message}{suffix}"


if __name__ == "__main__":
    test_cases = [
        ("정말 잘하셨어요!", "축하"),
        ("그건 좀 걱정되네요.", "불안정"),
        ("계속 시도하고 계시잖아요.", "위로"),
        ("오늘 날씨 좋네요.", "일상"),
        ("오랜만이에요!", "재회"),
        ("이렇게 시작할 수 있어서 반가워요.", "첫만남"),
        ("지금 집중이 필요한 상황입니다.", "일에 집중"),
        ("이 방법은 실용적이에요.", "생산활동"),
    ]

    for msg, ctx in test_cases:
        adjusted = adjust_tone(msg, ctx)
